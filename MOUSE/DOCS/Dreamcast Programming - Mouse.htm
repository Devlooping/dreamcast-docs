<!DOCTYPE html PUBLIC "-//IETF//DTD HTML//EN">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">

<title>Dreamcast Programming - Mouse</title>

</head>

<body alink="red" bgcolor="black" link="#6699cc" text="white" vlink="#6677cc">
<top>

<img alt="" src="Dreamcast%20Programming%20-%20Mouse_files/dc_mark.gif" align="right">

<p><img alt="Mouse" src="Dreamcast%20Programming%20-%20Mouse_files/asw4kq4vlpnfxtobd3366p2z0ge0klcd77fikk06ok43fohi7indp27e436a.gif" style="border: none;" valign="top" height="43" width="99"></p>


There are at least two models of mice available, the Japanese HKT-9900 and
the American HKT-4200.  The latter has three buttons (two on top and one
thumb button) and a mouse wheel.  The earlier seems to have the same set
of features, but this has not yet been verified.  The mouse is connected
to the <a href="http://mc.pp.se/dc/maplebus.html">Maple Bus</a>, just like other controller-type
peripherals.

<br clear="right">





<p><img alt="Mouse Condition structure" src="Dreamcast%20Programming%20-%20Mouse_files/hwhvnjki1vaw5xeayq6ziu4zt3iviz1cjij1eel5mhm9sbmpcwefgohphhzh.gif" style="border: none;" valign="top" height="35" width="326"></p>



<p>
The current state of a mouse is queried with the Get condition request.
The condition stucture for the Mouse function code ($200) is as follows:

</p><pre>int32 buttons       ; digital buttons bitfield (little endian)
int16 axis1         ; horizontal movement (0-$3FF) (little endian)
int16 axis2         ; vertical movement (0-$3FF) (little endian)
int16 axis3         ; mouse wheel movement (0-$3FF) (little endian)
int16 axis4         ; ? movement (0-$3FF) (little endian)
int16 axis5         ; ? movement (0-$3FF) (little endian)
int16 axis6         ; ? movement (0-$3FF) (little endian)
int16 axis7         ; ? movement (0-$3FF) (little endian)
int16 axis8         ; ? movement (0-$3FF) (little endian)</pre>

The buttons bitfield contains zeroes for pressed buttons, and ones for
unpressed buttons (only the 8 least significant bits are used).


<table bgcolor="#808020" border="0" cellpadding="1" cellspacing="0">

<tbody><tr>

<td>
<table border="0" cellpadding="3" cellspacing="2">

<tbody><tr>
<th bgcolor="#404000">Bit</th><th bgcolor="#404000">Button</th>
</tr>

<tr>

<td bgcolor="#404000">0</td>

<td bgcolor="#404000">Middle button (C)</td>

</tr>

<tr>

<td bgcolor="#404000">1</td>

<td bgcolor="#404000">Right button (B)</td>

</tr>

<tr>

<td bgcolor="#404000">2</td>

<td bgcolor="#404000">Left button (A)</td>

</tr>

<tr>

<td bgcolor="#404000">3</td>

<td bgcolor="#404000">Thumb button (START)</td>

</tr>

<tr>

<td bgcolor="#404000">4</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">5</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">6</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">7</td>

<td bgcolor="#404000">? button</td>

</tr>

</tbody></table>
</td>

</tr>

</tbody></table>


<br>
The axis movement fields contain the amount of movement since the last
poll, as an offseted integer.  $200 means no movement, $0 is maximum movement
to the left / up, and $3FF is maximum movement to the right / down.
<p></p>




<p><img alt="Mouse Function data bitfield" src="Dreamcast%20Programming%20-%20Mouse_files/hwhvnjki1vaw5xeayq6ziu4zt3iviz1e5e7lm9o6p7bwm95ebbj7xflcr70u.gif" style="border: none;" valign="top" height="35" width="347"></p>



<p>The <a href="http://mc.pp.se/dc/maplebus.html#funcdata"><tt>function_data</tt></a> for the
Mouse function code is a bitfield describing which controls are present
on the particular device (zero = not present, one = present):


<table bgcolor="#808020" border="0" cellpadding="1" cellspacing="0">

<tbody><tr>

<td>
<table border="0" cellpadding="3" cellspacing="2">

<tbody><tr>
<th bgcolor="#404000">Bit</th><th bgcolor="#404000">Control</th>
</tr>

<tr>

<td bgcolor="#404000">0</td>

<td bgcolor="#404000">Axis 1</td>

</tr>

<tr>

<td bgcolor="#404000">1</td>

<td bgcolor="#404000">Axis 2</td>

</tr>

<tr>

<td bgcolor="#404000">2</td>

<td bgcolor="#404000">Axis 3</td>

</tr>

<tr>

<td bgcolor="#404000">3</td>

<td bgcolor="#404000">Axis 4</td>

</tr>

<tr>

<td bgcolor="#404000">4</td>

<td bgcolor="#404000">Axis 5</td>

</tr>

<tr>

<td bgcolor="#404000">5</td>

<td bgcolor="#404000">Axis 6</td>

</tr>

<tr>

<td bgcolor="#404000">6</td>

<td bgcolor="#404000">Axis 7</td>

</tr>

<tr>

<td bgcolor="#404000">7</td>

<td bgcolor="#404000">Axis 8</td>

</tr>

<tr>

<td bgcolor="#404000">8</td>

<td bgcolor="#404000">Middle button</td>

</tr>

<tr>

<td bgcolor="#404000">9</td>

<td bgcolor="#404000">Right button</td>

</tr>

<tr>

<td bgcolor="#404000">10</td>

<td bgcolor="#404000">Left button</td>

</tr>

<tr>

<td bgcolor="#404000">11</td>

<td bgcolor="#404000">Thumb button</td>

</tr>

<tr>

<td bgcolor="#404000">12</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">13</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">14</td>

<td bgcolor="#404000">? button</td>

</tr>

<tr>

<td bgcolor="#404000">15</td>

<td bgcolor="#404000">? button</td>

</tr>

</tbody></table>
</td>

</tr>

</tbody></table>

</p>




<hr>
<a href="http://www.roxen.com/"><img alt="Powered by Roxen" src="Dreamcast%20Programming%20-%20Mouse_files/internal-roxen-power-small-white.gif" height="40" align="right" border="0" width="40"></a><a href="http://mc.pp.se/dc/">Dreamcast Programming</a> by <i><a href="mailto:marcus@mc.pp.se">Marcus Comstedt</a></i><br>

<!-- Created: Mon Dec 11 23:30:50 MET 2000 -->
<!-- hhmts start -->
Last modified: Tue Dec 12 00:09:49 MET 2000
<!-- hhmts end -->

</top>





</body></html>